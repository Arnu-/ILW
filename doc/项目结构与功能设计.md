单词记忆游戏项目架构设计
项目目录结构
word-memory-game/
├── app.py                  # 主应用入口，Flask后端服务
├── config.py               # 配置文件，存储应用配置
├── requirements.txt        # Python依赖包列表
├── .env                    # 环境变量配置文件
├── .gitignore              # Git忽略文件配置
├── start.sh                # 启动脚本
├── README.md               # 项目说明文档
├── static/                 # 静态资源目录
│   ├── css/                # CSS样式文件
│   │   ├── style.css       # 用户端样式
│   │   └── admin.css       # 管理员端样式
│   ├── js/                 # JavaScript文件
│   │   ├── script.js       # 用户端主脚本
│   │   ├── admin.js        # 管理员端主脚本
│   │   ├── auth.js         # 用户认证相关脚本
│   │   ├── learning.js     # 学习功能相关脚本
│   │   ├── challenge.js    # 最终挑战相关脚本
│   │   └── leaderboard.js  # 排行榜相关脚本
│   ├── images/             # 图片资源
│   │   ├── badges/         # 成就徽章图片
│   │   └── icons/          # 界面图标
│   └── audio/              # 音频资源（可选，用于缓存单词发音）
├── templates/              # HTML模板
│   ├── index.html          # 用户端主页
│   └── admin.html          # 管理员端主页
├── models/                 # 数据模型
│   ├── __init__.py         # 初始化文件
│   ├── database.py         # 数据库连接和初始化
│   ├── word.py             # 单词相关模型
│   ├── user.py             # 用户相关模型
│   ├── group.py            # 单词组相关模型
│   └── progress.py         # 学习进度相关模型
├── controllers/            # 控制器
│   ├── __init__.py         # 初始化文件
│   ├── word_controller.py  # 单词管理控制器
│   ├── user_controller.py  # 用户管理控制器
│   ├── group_controller.py # 单词组管理控制器
│   ├── learning_controller.py # 学习过程控制器
│   └── admin_controller.py # 管理员功能控制器
├── services/               # 服务层
│   ├── __init__.py         # 初始化文件
│   ├── word_service.py     # 单词服务
│   ├── audio_service.py    # 单词发音服务
│   ├── progress_service.py # 学习进度服务
│   └── score_service.py    # 分数和排行榜服务
├── utils/                  # 工具函数
│   ├── __init__.py         # 初始化文件
│   ├── word_difficulty.py  # 单词难度计算工具
│   ├── import_export.py    # 导入导出工具
│   └── auth_utils.py       # 认证相关工具
├── tests/                  # 测试代码
│   ├── __init__.py         # 初始化文件
│   ├── test_models.py      # 模型测试
│   ├── test_controllers.py # 控制器测试
│   └── test_services.py    # 服务测试
└── data/                   # 数据文件
    ├── words.db            # SQLite数据库文件
    ├── templates/          # 导入导出模板
    └── backups/            # 数据备份
文件功能说明
核心文件
app.py

应用入口点
初始化Flask应用
注册路由和蓝图
配置数据库连接
启动Web服务器
config.py

应用配置参数
开发/生产环境配置
数据库连接配置
API密钥和外部服务配置
requirements.txt

列出所有Python依赖包
包括Flask、SQLite、pandas等
.env

环境变量配置
API密钥
开发/生产环境切换
start.sh

启动脚本
安装依赖
初始化数据库
启动应用
前端文件
templates/index.html

用户端主页面
包含所有用户界面组件
登录、单词组选择、学习界面等
templates/admin.html

管理员端主页面
单词管理界面
单词组管理界面
导入导出功能
static/css/style.css

用户端样式定义
响应式布局
动画效果
static/css/admin.css

管理员端样式定义
表格和表单样式
数据可视化样式
static/js/script.js

用户端主要JavaScript逻辑
页面切换
学习流程控制
static/js/admin.js

管理员端主要JavaScript逻辑
单词管理
单词组管理
导入导出功能
static/js/auth.js

用户认证相关功能
登录/注册
用户状态管理
static/js/learning.js

学习功能实现
三个学习阶段逻辑
进度跟踪
static/js/challenge.js

最终挑战功能
成就系统
static/js/leaderboard.js

排行榜功能
数据过滤和排序
后端模型
models/database.py

数据库连接管理
表结构定义
初始化函数
models/word.py

单词模型
单词CRUD操作
难度计算
models/user.py

用户模型
用户认证
用户进度关联
models/group.py

单词组模型
单词分组
组解锁逻辑
models/progress.py

学习进度模型
成绩记录
统计功能
控制器
controllers/word_controller.py

单词相关API路由
单词CRUD操作
单词发音获取
controllers/user_controller.py

用户相关API路由
用户认证
用户进度查询
controllers/group_controller.py

单词组相关API路由
组内单词获取
组解锁状态
controllers/learning_controller.py

学习过程相关API路由
学习结果提交
进度更新
controllers/admin_controller.py

管理员功能API路由
批量导入导出
系统设置
服务层
services/word_service.py

单词业务逻辑
难度计算
单词分组算法
services/audio_service.py

单词发音获取
外部API调用
音频缓存
services/progress_service.py

学习进度处理
成绩计算
解锁逻辑
services/score_service.py

分数计算
排行榜生成
成就判定
工具函数
utils/word_difficulty.py

单词难度计算算法
基于长度和其他特征
utils/import_export.py

CSV/Excel导入导出
数据格式转换
错误处理
utils/auth_utils.py

认证辅助函数
会话管理
权限检查
数据库设计
words表

id: 主键
word: 英文单词
translation: 中文翻译
difficulty: 难度级别(1-4)
created_at: 创建时间
users表

id: 主键
username: 用户名
created_at: 创建时间
word_groups表

id: 主键
name: 组名称
description: 组描述
sequence: 组顺序
group_words表

id: 主键
group_id: 单词组ID
word_id: 单词ID
user_progress表

id: 主键
user_id: 用户ID
group_id: 单词组ID
stage: 学习阶段(1-3)
completed: 是否完成
accuracy: 正确率
last_practice: 最后练习时间
word_learning_records表

id: 主键
user_id: 用户ID
word_id: 单词ID
stage: 学习阶段
attempts: 尝试次数
correct: 正确次数
last_attempt: 最后尝试时间
scores表

id: 主键
user_id: 用户ID
score: 分数
level: 关卡
time_spent: 用时
created_at: 创建时间
API设计
用户API
POST /api/users - 创建/登录用户
GET /api/users/{id}/progress - 获取用户进度
GET /api/users/{id}/scores - 获取用户分数
POST /api/users/{id}/submit-learning - 提交学习结果
GET /api/users/{id}/final-challenge-status - 获取最终挑战状态
GET /api/users/{id}/final-challenge-words - 获取最终挑战单词
单词API
GET /api/words - 获取所有单词
POST /api/words - 添加单词
PUT /api/words/{id} - 更新单词
DELETE /api/words/{id} - 删除单词
PUT /api/words/{id}/difficulty - 设置单词难度
GET /api/word-audio - 获取单词发音
POST /api/words/import - 导入单词
GET /api/words/export - 导出单词
GET /api/words/template - 获取导入模板
单词组API
GET /api/word-groups - 获取所有单词组
GET /api/word-groups/{id}/words - 获取组内单词
POST /api/admin/initialize-balanced-groups - 初始化均衡单词组
分数API
POST /api/scores - 保存分数
GET /api/scores/top - 获取总排行榜
GET /api/scores/level/{level}/top - 获取关卡排行榜
GET /api/scores/level/{level}/user/{id}/rank - 获取用户在关卡中的排名
这个架构设计提供了清晰的文件组织和功能分离，使项目易于开发、维护和扩展。同时，它也遵循了MVC模式，将数据模型、视图和控制器分离，提高了代码的可读性和可维护性。